package com.dnk.GUI;

import com.dnk.Logic.Board;
import com.dnk.Logic.Piece;
import com.dnk.Logic.Player;
import java.awt.Color;
import java.util.List;
import java.util.ArrayList;
import javax.swing.BorderFactory;
import javax.swing.ImageIcon;
import javax.swing.JLabel;
import javax.swing.JPanel;


public class GameGUIBoard extends javax.swing.JFrame {

    private Board board;
    private Player player1;
    private Player player2;
    private List<JLabel> jLabelList = new ArrayList<>();                        // List of Labels on the board (images)
    
    public GameGUIBoard(Board board, Player player1, Player player2) {          // Assign Board and players
        initComponents();
        this.board = board;
        this.player1 = player1;
        this.player2 = player2;
        this.setIconImage(new ImageIcon(this.getClass().getResource("/ticTacToeIcon.png")).getImage());
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        jPanel2 = new javax.swing.JPanel();
        jPanel3 = new javax.swing.JPanel();
        jPanel4 = new javax.swing.JPanel();
        jPanel5 = new javax.swing.JPanel();
        jPanel6 = new javax.swing.JPanel();
        jPanel7 = new javax.swing.JPanel();
        jPanel8 = new javax.swing.JPanel();
        jPanel9 = new javax.swing.JPanel();
        jPanel10 = new javax.swing.JPanel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setTitle("Tic Tac Toe");
        setForeground(java.awt.Color.darkGray);
        setMaximumSize(new java.awt.Dimension(500, 500));
        setMinimumSize(new java.awt.Dimension(500, 500));

        jPanel1.setBackground(new java.awt.Color(43, 43, 43));
        jPanel1.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(17, 17, 17), 3));
        jPanel1.setForeground(new java.awt.Color(43, 43, 43));
        jPanel1.setMaximumSize(new java.awt.Dimension(500, 500));
        jPanel1.setMinimumSize(new java.awt.Dimension(500, 500));
        jPanel1.setLayout(new java.awt.GridLayout(3, 3));

        jPanel2.setBackground(new java.awt.Color(43, 43, 43));
        jPanel2.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jPanel2MouseClicked(evt);
            }
            public void mouseEntered(java.awt.event.MouseEvent evt) {
                jPanel2MouseEntered(evt);
            }
            public void mouseExited(java.awt.event.MouseEvent evt) {
                jPanel2MouseExited(evt);
            }
        });
        jPanel2.setLayout(new java.awt.GridBagLayout());
        jPanel1.add(jPanel2);

        jPanel3.setBackground(new java.awt.Color(43, 43, 43));
        jPanel3.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jPanel3MouseClicked(evt);
            }
            public void mouseEntered(java.awt.event.MouseEvent evt) {
                jPanel3MouseEntered(evt);
            }
            public void mouseExited(java.awt.event.MouseEvent evt) {
                jPanel3MouseExited(evt);
            }
        });
        jPanel3.setLayout(new java.awt.GridBagLayout());
        jPanel1.add(jPanel3);

        jPanel4.setBackground(new java.awt.Color(43, 43, 43));
        jPanel4.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jPanel4MouseClicked(evt);
            }
            public void mouseEntered(java.awt.event.MouseEvent evt) {
                jPanel4MouseEntered(evt);
            }
            public void mouseExited(java.awt.event.MouseEvent evt) {
                jPanel4MouseExited(evt);
            }
        });
        jPanel4.setLayout(new java.awt.GridBagLayout());
        jPanel1.add(jPanel4);

        jPanel5.setBackground(new java.awt.Color(43, 43, 43));
        jPanel5.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jPanel5MouseClicked(evt);
            }
            public void mouseEntered(java.awt.event.MouseEvent evt) {
                jPanel5MouseEntered(evt);
            }
            public void mouseExited(java.awt.event.MouseEvent evt) {
                jPanel5MouseExited(evt);
            }
        });
        jPanel5.setLayout(new java.awt.GridBagLayout());
        jPanel1.add(jPanel5);

        jPanel6.setBackground(new java.awt.Color(43, 43, 43));
        jPanel6.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jPanel6MouseClicked(evt);
            }
            public void mouseEntered(java.awt.event.MouseEvent evt) {
                jPanel6MouseEntered(evt);
            }
            public void mouseExited(java.awt.event.MouseEvent evt) {
                jPanel6MouseExited(evt);
            }
        });
        jPanel6.setLayout(new java.awt.GridBagLayout());
        jPanel1.add(jPanel6);

        jPanel7.setBackground(new java.awt.Color(43, 43, 43));
        jPanel7.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jPanel7MouseClicked(evt);
            }
            public void mouseEntered(java.awt.event.MouseEvent evt) {
                jPanel7MouseEntered(evt);
            }
            public void mouseExited(java.awt.event.MouseEvent evt) {
                jPanel7MouseExited(evt);
            }
        });
        jPanel7.setLayout(new java.awt.GridBagLayout());
        jPanel1.add(jPanel7);

        jPanel8.setBackground(new java.awt.Color(43, 43, 43));
        jPanel8.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jPanel8MouseClicked(evt);
            }
            public void mouseEntered(java.awt.event.MouseEvent evt) {
                jPanel8MouseEntered(evt);
            }
            public void mouseExited(java.awt.event.MouseEvent evt) {
                jPanel8MouseExited(evt);
            }
        });
        jPanel8.setLayout(new java.awt.GridBagLayout());
        jPanel1.add(jPanel8);

        jPanel9.setBackground(new java.awt.Color(43, 43, 43));
        jPanel9.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jPanel9MouseClicked(evt);
            }
            public void mouseEntered(java.awt.event.MouseEvent evt) {
                jPanel9MouseEntered(evt);
            }
            public void mouseExited(java.awt.event.MouseEvent evt) {
                jPanel9MouseExited(evt);
            }
        });
        jPanel9.setLayout(new java.awt.GridBagLayout());
        jPanel1.add(jPanel9);

        jPanel10.setBackground(new java.awt.Color(43, 43, 43));
        jPanel10.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jPanel10MouseClicked(evt);
            }
            public void mouseEntered(java.awt.event.MouseEvent evt) {
                jPanel10MouseEntered(evt);
            }
            public void mouseExited(java.awt.event.MouseEvent evt) {
                jPanel10MouseExited(evt);
            }
        });
        jPanel10.setLayout(new java.awt.GridBagLayout());
        jPanel1.add(jPanel10);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, 500, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, 500, Short.MAX_VALUE)
        );

        pack();
    }// </editor-fold>                        

    private void jPanelHighlighter(JPanel jPanel, boolean highlight){           // Method to highlight the JPanel where the mouse is placed
        if(highlight){jPanel.setBorder(BorderFactory.createLineBorder(Color.RED, 2));}
        else{jPanel.setBorder(BorderFactory.createEmptyBorder());}
    }
    
    public void boardCleaner(){                                                 // Method to clear the board, eliminating the existing Labels (images)
        for(JLabel jLabel:jLabelList){
            jLabel.getParent().remove(jLabel);
        }
        jLabelList.clear();
        jPanel1.repaint();
    }
    
    private void jPanelClicked (JPanel jPanel,int xCoordinate,int yCoordinate){ // Method to add labels to board, check for winners and draw when a Panel is clicked
        Player player = player1.isTurn() ? player1 : player2;
        if(board.placePieceOnBoard(player.placePiece(xCoordinate,yCoordinate))){    // Checks if position is occupied
                  try{
                    JLabel jLabel = new JLabel();                                       // Creates label (image) and includes it into the board
                    Piece piece = board.getPieceAt(xCoordinate, yCoordinate);
                    ImageIcon image = new ImageIcon(getClass().getResource(piece.getImage()));
                    jLabel.setIcon(image);
                    jLabel.setSize(65,65);
                    jPanel.add(jLabel);
                    jPanel.validate();
                    jLabelList.add(jLabel);
                    if(board.winCheck()){                                               // Checks for winners to execute Final screen if true
                        EndGameScreen egs = new EndGameScreen(board, image);
                        egs.setVisible(true);
                        egs.setLocationRelativeTo(null);
                        this.boardCleaner();
                    }                                                                   // Checks for draw to clean the board
                    if(board.drawCheck()){
                        board.resetBoard();
                        this.boardCleaner();
                    }
                    board.turnSwitch(player1, player2);                                 // Switches turns between players
                  }catch(Exception e){System.out.println("ERROR: " + e);}
        }
    }
    
    private void jPanel2MouseEntered(java.awt.event.MouseEvent evt) {                                     
        jPanelHighlighter(jPanel2, true);
    }                                    

    private void jPanel2MouseExited(java.awt.event.MouseEvent evt) {                                    
        jPanelHighlighter(jPanel2, false);
    }                                   

    private void jPanel3MouseEntered(java.awt.event.MouseEvent evt) {                                     
        jPanelHighlighter(jPanel3, true);
    }                                    

    private void jPanel3MouseExited(java.awt.event.MouseEvent evt) {                                    
        jPanelHighlighter(jPanel3, false);
    }                                   

    private void jPanel4MouseEntered(java.awt.event.MouseEvent evt) {                                     
        jPanelHighlighter(jPanel4, true);
    }                                    

    private void jPanel4MouseExited(java.awt.event.MouseEvent evt) {                                    
        jPanelHighlighter(jPanel4, false);
    }                                   

    private void jPanel5MouseEntered(java.awt.event.MouseEvent evt) {                                     
        jPanelHighlighter(jPanel5, true);
    }                                    

    private void jPanel5MouseExited(java.awt.event.MouseEvent evt) {                                    
        jPanelHighlighter(jPanel5, false);
    }                                   

    private void jPanel6MouseEntered(java.awt.event.MouseEvent evt) {                                     
        jPanelHighlighter(jPanel6, true);
    }                                    

    private void jPanel6MouseExited(java.awt.event.MouseEvent evt) {                                    
        jPanelHighlighter(jPanel6, false);
    }                                   

    private void jPanel7MouseEntered(java.awt.event.MouseEvent evt) {                                     
        jPanelHighlighter(jPanel7, true);
    }                                    

    private void jPanel7MouseExited(java.awt.event.MouseEvent evt) {                                    
        jPanelHighlighter(jPanel7, false);
    }                                   

    private void jPanel8MouseEntered(java.awt.event.MouseEvent evt) {                                     
        jPanelHighlighter(jPanel8, true);
    }                                    

    private void jPanel8MouseExited(java.awt.event.MouseEvent evt) {                                    
        jPanelHighlighter(jPanel8, false);
    }                                   

    private void jPanel9MouseEntered(java.awt.event.MouseEvent evt) {                                     
        jPanelHighlighter(jPanel9, true);
    }                                    

    private void jPanel9MouseExited(java.awt.event.MouseEvent evt) {                                    
        jPanelHighlighter(jPanel9, false);
    }                                   

    private void jPanel10MouseEntered(java.awt.event.MouseEvent evt) {                                      
        jPanelHighlighter(jPanel10, true);
    }                                     

    private void jPanel10MouseExited(java.awt.event.MouseEvent evt) {                                     
        jPanelHighlighter(jPanel10, false);
    }                                    

    private void jPanel2MouseClicked(java.awt.event.MouseEvent evt) {                                     
        jPanelClicked(jPanel2,0,0);
    }                                    

    private void jPanel3MouseClicked(java.awt.event.MouseEvent evt) {                                     
        jPanelClicked(jPanel3,0,1);
    }                                    

    private void jPanel4MouseClicked(java.awt.event.MouseEvent evt) {                                     
        jPanelClicked(jPanel4,0,2);
    }                                    

    private void jPanel5MouseClicked(java.awt.event.MouseEvent evt) {                                     
        jPanelClicked(jPanel5,1,0);
    }                                    

    private void jPanel6MouseClicked(java.awt.event.MouseEvent evt) {                                     
        jPanelClicked(jPanel6,1,1);
    }                                    

    private void jPanel7MouseClicked(java.awt.event.MouseEvent evt) {                                     
        jPanelClicked(jPanel7,1,2);
    }                                    

    private void jPanel8MouseClicked(java.awt.event.MouseEvent evt) {                                     
        jPanelClicked(jPanel8,2,0);
    }                                    

    private void jPanel9MouseClicked(java.awt.event.MouseEvent evt) {                                     
        jPanelClicked(jPanel9,2,1);
    }                                    

    private void jPanel10MouseClicked(java.awt.event.MouseEvent evt) {                                      
        jPanelClicked(jPanel10,2,2);
    }                                     

    // Variables declaration - do not modify                     
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel10;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel4;
    private javax.swing.JPanel jPanel5;
    private javax.swing.JPanel jPanel6;
    private javax.swing.JPanel jPanel7;
    private javax.swing.JPanel jPanel8;
    private javax.swing.JPanel jPanel9;
    // End of variables declaration                   
}
